{% extends 'news_scraper/base.html' %}

{% block head %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'news_scraper/css/user_sources.css' %}">
{% endblock %}

{% block title %}
{{user.username.capitalize}}'s News Sources
{% endblock title %}

{% block body %}

{{ sourceData|json_script:"user-source-data" }}

<h1>{{user.username.capitalize}}'s News Sources</h1>
<h3>Here, you can choose the news outlets you want to get your articles from.</h3>
<br>

<div id="app" class="user_sources">

    <div id="vueinst"></div>

    {% if new_sources %}
    <form id="add_form" action="{% url 'news_scraper:user_sources' %}" method="">
        {% csrf_token %}

        <ul class="source-list">
            <h4>Other availabe sources:</h4>
            {% for new_source in new_sources %}
            <li class="source-item-light">
                <div class=left-side>{{ new_source.name }}</div>

                <!-- IMPLEMENT ME -->
                <input @click="updateValue('{{new_source.name}}')" type="submit" id="ad_src" class="edit-source"
                    name="action" value="Add Source"></input>
            </li>
            {% endfor %}

        </ul>
    </form>
    {% endif %}

</div>


{% load static %}
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="{% static 'news_scraper/scripts/user_sources.js'%}"></script>
{% endblock body %}