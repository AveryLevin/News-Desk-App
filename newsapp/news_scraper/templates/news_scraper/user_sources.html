{% extends 'news_scraper/base.html' %}

{% block head %}
{% load static %}
<link rel="stylesheet" type="text/css" href="{% static 'news_scraper/css/user_sources.css' %}">
{% endblock %}

{% block title %}
{{user.username.capitalize}}'s News Sources
{% endblock title %}

{% block body %}

<script>csrftoken = "{{csrf_token}}" </script>

<h1>{{user.username.capitalize}}'s News Sources</h1>
<h3>Here, you can choose the news outlets you want to get your articles from.</h3>
<br>

<div id="app" class="user_sources">

    <form id="remove_form" action="{% url 'news_scraper:user_sources' %}" method="post">
        
        <ul class="source-list">
            <h4>Your current sources:</h4>
            <current-source-item
            v-for="source in currentSources"
            v-bind:name="source.name">
        </current-source-item>

        </ul>
    </form>


    {% if new_sources %}
    <form id="add_form" action="{% url 'news_scraper:user_sources' %}" method="post">
        {% csrf_token %}
        
        <ul class="source-list">
            <h4>Other availabe sources:</h4>
            {% for new_source in new_sources %}
            <li class="source-item-light">
                <div class=left-side>{{ new_source.name }}</div>

                <!-- IMPLEMENT ME -->
                <input @click="updateValue('{{new_source.name}}')" type="submit" id="ad_src" class="edit-source" name="action" value="Add Source"></input>
            </li>
            {% endfor %}

        </ul>
    </form>
    {% endif %}

</div>


{% load static %}
<script
  src="https://code.jquery.com/jquery-3.5.1.slim.js"
  integrity="sha256-DrT5NfxfbHvMHux31Lkhxg42LY6of8TaYyK50jnxRnM="
  crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue"></script>
<script src="{% static 'news_scraper/scripts/user_sources.js'%}"></script>
{% endblock body %}